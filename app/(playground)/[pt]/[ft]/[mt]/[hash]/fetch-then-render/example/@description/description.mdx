# Fetch-then-Render

Fetch-then-Render パターンでは、コンポーネントのレンダリング前に必要なデータを取得します。  
このパターンでは、コンポーネントがマウントされる前に、外部 API やデータソースから必要な情報を取得します。  
Next.js のようなフレームワークでは、**getServerSideProps**、**getStaticProps**等を使用して、サーバーサイドでデータを事前にフェッチし、コンポーネントに props として渡すことができます。  
また**Next.js^13 より登場した AppRouter**では、**非同期コンポーネント**を使用してデータ取得を待ってレンダリングを実行させることが可能です。

## メリット

・**データ依存のレンダリング:** UI がデータに依存している場合、データが利用可能になるまでレンダリングが遅延されるので、不完全な状態での UI 表示を避けることができます。  
・**ユーザーエクスペリエンス:** データを先に取得してから表示することで、ユーザーに完全な UI を提供できます。

## デメリット

・**初期ロード時間の増加:** データの取得が完了されるまでユーザーに何も表示されないため、データ取得に時間がかかる場合、UI の表示が遅れる可能性があります。  
・**エラーハンドリング:** データ取得に失敗した場合、UI が全く表示されないか、エラー状態で表示される可能性があります。

## 運用ケース

Fetch-then-Render は、UI がデータに強く依存している場合に特に有効です。  
例えば、ユーザープロファイルや詳細なリスト表示など、データが完全に揃うまでユーザーに何も見せたくない場合に適しています。  
データ取得の時間が比較的短く、ユーザーエクスペリエンスを最優先する場合にも適しています。

## 実装

[このページの実装を見る](code)
